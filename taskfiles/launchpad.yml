# tasks that let you interact with the indexer for operational requirements
version: '3'

includes:
  deps: ./install_{{OS}}.yml

tasks:
  version:
    desc: Display launchpad-core version information
    # silent: true
    cmds:
      - | 
        REPO="https://github.com/graphops/launchpad-core"
        CORE_COMMIT=$(cd $(pwd)/launchpad-core; git rev-parse HEAD)
        CORE_REF=$(cd $(pwd)/launchpad-core; git describe --tags || true)
        LOGO=$(printf " _                        _                     _ \n| | __ _ _   _ _ __   ___| |__  _ __   __ _  __| |\n| |/ _\` | | | | '_ \ / __| '_ \| '_ \ / _\` |/ _\` |\n| | (_| | |_| | | | | (__| | | | |_) | (_| | (_| |\n|_|\__,_|\__,_|_| |_|\___|_| |_| .__/ \__,_|\__,_|\n                               |_|                ")
        TEXT=$(printf "$LOGO\n\n$REPO\nlaunchpad-core submodule version: $CORE_COMMIT $CORE_REF")
        gum style --foreground "#48a795" --border double --align center --margin "1 2" --padding "2 4" "$TEXT"
  
  deps:
    desc: 'Installs all external dependencies using OS package manager.'
    cmds:
      - cmd: |
          echo "Hello I did get here"
      - task: deps:brew-status
      - task: deps:ansible
      - task: deps:helm
      - task: deps:helmfile
      - task: deps:gum
      - task: deps:kubectl
      - task: deps:kubeseal
      - task: deps:jq
      - task: deps:gum
      - task: deps:octant
      - task: deps:k9s
      - task: deps:helm-git