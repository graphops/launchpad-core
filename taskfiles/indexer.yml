# tasks that let you interact with the indexer for operational requirements
version: '3'

vars: #Â customise these in your .env in launchpad-starter
  RELEASE_NAME_KUBE_PROMETHEUS_STACK: '{{.RELEASE_NAME_KUBE_PROMETHEUS_STACK | default "kube-prometheus-stack"}}'

tasks:
  # remote-toolbox:
  #   interactive: true
  #   cmds:
  #     - kubectl exec --tty --interactive xxxxxxx -- {{.CLI_ARGS}}

  # forward-indexer-agent:
  #   cmds:
  #     - kubectl -n indexer port-forward service/service-name port:port

  forward-grafana:
    desc: Open a port forward to the Grafana instance in the cluster
    cmds:
      - |
        echo "Once the port forward is open, you can open the Grafana interface at http://localhost:3001"
        kubectl -n monitoring --context $KUBECONTEXT port-forward service/{{.RELEASE_NAME_KUBE_PROMETHEUS_STACK}}-grafana 3001:80

  # forward-eth-mainnet:
  #   cmds:
  #     - 

  # forward-all:
  #   deps:
  #     - forward-indexer-agent
  #     - forward-grafana
  #     - forward-erigon
